<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard - AI Study Planner</title>
    <style>
        :root {
            --primary: #4361ee;
            --secondary: #3a0ca3;
            --success: #4cc9f0;
            --warning: #f72585;
            --light: #f8f9fa;
            --dark: #212529;
        }
        body { font-family: Arial, sans-serif; margin: 0; padding: 20px; background: #f5f5f5; }
        .container { max-width: 1200px; margin: 0 auto; }
        .header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 30px; }
        .user-info { display: flex; align-items: center; gap: 15px; }
        .stats-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px; margin-bottom: 30px; }
        .stat-card { background: white; padding: 20px; border-radius: 10px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); }
        .progress-bar { height: 10px; background: #e9ecef; border-radius: 5px; margin: 10px 0; }
        .progress-fill { height: 100%; background: var(--primary); border-radius: 5px; }
        .nav-menu { display: flex; gap: 15px; flex-wrap: wrap; margin-bottom: 30px; }
        .nav-btn { padding: 12px 20px; background: var(--primary); color: white; border: none; border-radius: 5px; cursor: pointer; text-decoration: none; }
        .nav-btn:hover { background: var(--secondary); }
        .section { background: white; padding: 20px; border-radius: 10px; margin-bottom: 20px; }
        .ai-features { display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px; }
        .ai-card { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 20px; border-radius: 10px; }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ğŸ“š AI Study Planner</h1>
            <div class="user-info">
                <span>Welcome, {{ session.username }}</span>
                <a href="/logout" class="nav-btn">Logout</a>
            </div>
        </div>

        <!-- Navigation Menu -->
        <div class="nav-menu">
            <a href="/dashboard" class="nav-btn">ğŸ  Dashboard</a>
            <a href="/subject_management" class="nav-btn">ğŸ“– Subjects</a>
            <a href="/ai_schedule_generator" class="nav-btn">ğŸ¤– AI Schedule</a>
            <a href="/calendar_view" class="nav-btn">ğŸ“… Calendar</a>
            <a href="/progress_tracking" class="nav-btn">ğŸ“Š Progress</a>
            <a href="/mood_tracker" class="nav-btn">ğŸ˜Š Mood Tracker</a>
            <a href="/time_availability" class="nav-btn">â° Time</a>
            <a href="/goals" class="nav-btn">ğŸ¯ Goals</a>
            <a href="/settings" class="nav-btn">âš™ï¸ Settings</a>
        </div>

        <!-- Stats Overview -->
        <div class="stats-grid">
            <div class="stat-card">
                <h3>Overall Progress</h3>
                <div class="progress-bar">
                    <div class="progress-fill" style="width: {{ overall_progress }}%"></div>
                </div>
                <p>{{ overall_progress }}% Complete</p>
            </div>
            
            <div class="stat-card">
                <h3>Today's Sessions</h3>
                <p style="font-size: 2em; color: var(--primary);">{{ today_schedule|length }}</p>
                <p>Study sessions scheduled</p>
            </div>
            
            <div class="stat-card">
                <h3>Current Streak</h3>
                <p style="font-size: 2em; color: var(--success);">{{ streak }} days</p>
                <p>Consistent studying!</p>
            </div>
            
            <div class="stat-card">
                <h3>Upcoming Exams</h3>
                <p style="font-size: 2em; color: var(--warning);">{{ upcoming_deadlines|length }}</p>
                <p>In next 7 days</p>
            </div>
        </div>

        <!-- AI Features Section -->
        <div class="section">
            <h2>ğŸ¤– AI Features</h2>
            <div class="ai-features">
                <a href="/ai_schedule_generator" class="ai-card">
                    <h3>ğŸ§  Generate AI Schedule</h3>
                    <p>Get personalized study plan based on your goals, time, and preferences</p>
                </a>
                
                <a href="/ai_tutoring" class="ai-card">
                    <h3>ğŸ“ AI Tutor</h3>
                    <p>Practice questions, flashcards, and personalized recommendations</p>
                </a>
                
                <a href="/mood_tracker" class="ai-card">
                    <h3>ğŸ˜Š Mood-Aware Planning</h3>
                    <p>Adaptive scheduling based on your mood and energy levels</p>
                </a>
            </div>
        </div>

        <!-- Today's Schedule -->
        <div class="section">
            <h2>ğŸ“… Today's Schedule</h2>
            {% if today_schedule %}
                {% for session in today_schedule %}
                <div style="background: #f8f9fa; padding: 10px; margin: 10px 0; border-radius: 5px;">
                    <strong>{{ session.start_time }} - {{ session.end_time }}</strong>
                    <p>{{ session.subject_name }}: {{ session.topic_name }}</p>
                    <form method="POST" action="/log_study_session" style="display: inline;">
                        <input type="hidden" name="schedule_id" value="{{ session.schedule_id }}">
                        <button type="submit">âœ… Mark as Done</button>
                    </form>
                </div>
                {% endfor %}
            {% else %}
                <p>No sessions scheduled for today. <a href="/ai_schedule_generator">Generate a schedule</a></p>
            {% endif %}
        </div>

    <script>
        // Auto-refresh dashboard every 5 minutes
        setTimeout(() => location.reload(), 300000);
    </script>
</body>
</html>